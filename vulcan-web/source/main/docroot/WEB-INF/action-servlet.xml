<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" 
	"http://www.springframework.org/dtd/spring-beans.dtd">
<!-- 
	$Id$
	$HeadURL$
-->
<beans>
	<bean name="projectReportBaseAction" abstract="true">
		<property name="store" ref="store"/>
		<property name="buildManager" ref="buildManager"/>
		<property name="projectManager" ref="stateManager"/>
		<property name="projectDomBuilder" ref="projectDomBuilder"/>
	</bean>

	<bean name="/viewProjectStatus"
			class="net.sourceforge.vulcan.web.struts.actions.ViewProjectStatusAction"
			parent="projectReportBaseAction"/>
	
	<bean name="/viewProjectBuildHistory"
			class="net.sourceforge.vulcan.web.struts.actions.ViewProjectBuildHistoryAction"
			parent="projectReportBaseAction">
		<property name="filename" value="vulcan-build-history.xml"/>
	</bean>
	
	<bean name="/buildmanagement/manualBuild"
			class="net.sourceforge.vulcan.web.struts.actions.ManualBuildAction">
		<property name="buildManager" ref="buildManager"/>
		<property name="projectManager" ref="stateManager"/>
		<property name="stateManager" ref="stateManager"/>
	</bean>

	<bean name="/buildmanagement/flushBuildQueue"
			class="net.sourceforge.vulcan.web.struts.actions.FlushBuildQueueAction">
		<property name="stateManager" ref="stateManager"/>
	</bean>
	
	<bean name="/buildmanagement/toggleScheduler"
			class="net.sourceforge.vulcan.web.struts.actions.ToggleSchedulerAction">
		<property name="stateManager" ref="stateManager"/>
	</bean>
	
	<bean name="/buildmanagement/kill"
			class="net.sourceforge.vulcan.web.struts.actions.KillBuildAction">
		<property name="stateManager" ref="stateManager"/>
	</bean>
	
	<bean name="/admin/clearMessages"
			class="net.sourceforge.vulcan.web.struts.actions.ClearMessagesAction">
		<property name="eventPool" ref="eventPool"/>
	</bean>

	<bean name="baseDispatchAction" abstract="true">
		<property name="stateManager" ref="stateManager"/>
		<property name="auditLog">
			<bean class="org.apache.commons.logging.LogFactory" factory-method="getLog">
				<constructor-arg value="net.sourceforge.vulcan.security.audit"/>
			</bean>
		</property>
		<property name="actionsToAudit">
			<set>
				<value>create</value>
				<value>update</value>
				<value>delete</value>
				<value>import</value>
				<value>upload</value>
			</set>
		</property>
	</bean>
	
	<bean name="/admin/setup/manageSchedulerConfig"
			class="net.sourceforge.vulcan.web.struts.actions.ManageSchedulerConfigAction"
			parent="baseDispatchAction">
		<property name="allowCronExpressions" value="true"/>
	</bean>
	
	<bean name="/admin/setup/manageProjectConfig"
			class="net.sourceforge.vulcan.web.struts.actions.ManageProjectConfigAction"
			parent="baseDispatchAction">
		<property name="store" ref="store"/>
	</bean>
	
	<bean name="/admin/setup/deleteProjects"
			class="net.sourceforge.vulcan.web.struts.actions.DeleteProjectsAction">
		<property name="stateManager" ref="stateManager"/>
	</bean>
	
	<bean name="/admin/setup/createProjectFromUrl"
			class="net.sourceforge.vulcan.web.struts.actions.CreateProjectFromUrlAction">
		<property name="projectImporter" ref="projectImporter"/>
	</bean>

	<bean name="/admin/viewConfig"
			class="net.sourceforge.vulcan.web.struts.actions.ViewConfigAction">
		<property name="store" ref="store"/>
		<property name="filename" value="vulcan-config.xml"/>
	</bean>
	
	<bean name="/admin/importConfiguration"
			class="net.sourceforge.vulcan.web.struts.actions.ImportConfigAction"
			parent="baseDispatchAction">
		<property name="eventHandler" ref="eventHandler"/>
		<property name="store" ref="store"/>
	</bean>
	
	<bean name="/admin/setup/manageBuildDaemonConfig"
			class="net.sourceforge.vulcan.web.struts.actions.ManageBuildDaemonConfigAction"
			parent="baseDispatchAction"/>
	
	<bean name="/admin/setup/managePlugin"
			class="net.sourceforge.vulcan.web.struts.actions.ManagePluginAction"
			parent="baseDispatchAction"/>
</beans>
	
